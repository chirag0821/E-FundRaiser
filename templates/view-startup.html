<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>E-fundraiser</title>
		<link rel="stylesheet" href="/static/css/view-startup.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
	{% if messages %}
    {% for message in messages %}
<div class="container-fluid p-0">
  <div class="alert {{ message.tags }} alert-dismissible" role="alert" >
    <button type="button" class="btn-close shadow-none" data-bs-dismiss="alert" aria-label="Close">
      
    </button>
    {{ message }}
  </div>
</div>
{% endfor %}
  {% endif %}
	<div class="wrapper">
		{% include "navbar.html" with active_tab="startup" %}
		<div class="inner-wrapper d-flex">
			<div class="sidebar">					
				<ul class="form-indexes">						
					<li><a href="#basic-details">Basic Details</a></li>
					<li><a href="#founders">Founders</a></li>						
					<li><a href="#business">Business Details</a></li>
					<li><a href="#valuation">Valuation and Funds</a></li>
					<li><a href="#documents">Documents</a></li>					
				</ul>
			</div>

			<div class="content w-100">
				<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
						{% for img in images %}
							<div class="carousel-item {% if forloop.counter == 1 %} active {% endif %}">
								<img src="{{img.file.url}}" style="width: 100%; height: 550px;" alt="...">
							</div>
						{% endfor %}
					</div>
					<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<!-- <span class="sr-only">Previous</span> -->
					</a>
					<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<!-- <span class="sr-only">Next</span> -->
					</a>
				</div>
				<p class="startup-name text-center mt-5">{{startup.title}}</p>
				<div class="d-block w-100">
					<div class="basic-details" id="basic-details">
						<div class="h3 title mx-auto">Basic Details</div>
						<br>
						<div>
							<div class="user-details">Name :<p class="user-data">{{startup.title}}</p></div>
							<div class="user-details">Firm Name : <p class="user-data">{{startup.firm_name}}</p></div>
							<div class="user-details">Address : <p class="user-data">{{startup.address}}</p></div>
							<div class="user-details">Email ID : <p class="user-data">{{startup.email}}</p></div>
							<div class="user-details">Contact No : <p class="user-data">{{startup.contact_no}}</p></div>
							<div class="user-details">Started From : <p class="user-data">{{startup.start_date|date:"M d, Y"}}</p></div>
						</div>
					</div>

					<div class="founders" id="founders">
						<div class="h3 title mx-auto">Founders</div>	
						<br>				
						<ul>
							{% for founder in founders %}
								<li class="founder-details">{{founder.name}}</li>
							{% endfor %}
						</ul>				
					</div>

					<div class="business-details" id="business">
						<div class="h3 title mx-auto">Business Details</div>
						<br>						
						<p>{{startup.description}}</p>
					</div>

					<div class="valuation" id="valuation">
						<div class="h3 title mx-auto">Valuation and Funds</div>
						<br>
						<div class="user-details">Valuation :<p class="user-data">Rs. {{startup.valuation}}</p></div>
						<div class="user-details">Expected Fund :<p class="user-data">Rs. {{startup.expected_fund}}</p></div>
					</div>
					
					<div class="investments" id="investments">
						<div class="h3 title mx-auto">Previous Investors</div>
							<table class="table table-sm table-responsive" style="margin-top: 20px">
								<thead>
									<tr>
										<th scope="col">Serial no.</th>							      
										<th scope="col">Investor</th>
										<th scope="col">Amount (Rs)</th>
										<th scope="col">Stake</th>
									</tr>
								</thead>
								<tbody>
									{% for investment in investments %}
										<tr>
											<td>{{forloop.counter}}</td>
											<td>{{investment.investor}}</td>							      
											<td>Rs. {{investment.amount}}</td>
											<td>{{investment.stake}}%</td>
										</tr>
									{% endfor %}					    
								</tbody>
							</table>
					</div>

					<div class="business-details" id="documents">
						<div class="h3 title mx-auto">Documents</div>
						<div class="doc">
							{% for doc in documents %}				
								<a href="{{doc.file.url}}" class="doc-card shadow p-3 bg-body rounded" target="_blank">
									<div class="doc-img-cover">
										<img src="static/images/pdf-logo.webp">
									</div>
									<p>{{doc.file.name}}</p>
								</a>
							{% endfor %}
						</div>
					</div>
					<div class="w-100 text-center">
						<button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#investModal">Invest</button>
					</div>
					
					<!-- Modal -->
					<div class="modal fade" id="investModal" tabindex="-1" aria-labelledby="investModalLabel" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="investModalLabel">Invest in {{startup.title}}</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<form method="post" action="/invest">
									{% csrf_token %}
									<div class="modal-body">
										<div class="mb-3 text-center">
											<label for="amount" class="col-form-label"><b>Amount (in Rs.)</b></label>
											<input type="number" class="form-control" id="amount" name="amount" required>
											<input type="hidden" class="form-control" id="startup_id" name="startup_id" value="{{startup.id}}">
										</div>
									</div>
									<div class="modal-footer justify-content-center">
										<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
										<button type="submit" class="btn btn-primary">Invest</button>
									</div>
								</form>
							</div>
						</div>
					</div>


				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
</body>
</html>